<!DOCTYPE html>
<html>
<head>
<meta name="google-signin-client_id"
	content="808186466447-qkcbf15u53sou7hfn9un20olkmr83i6c.apps.googleusercontent.com"
	charset="UTF-8">
<title>Registro Oca</title>

<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"
	rel="stylesheet">
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">

<!--  <script src=”https://apis.google.com/js/client:plusone.js”></script >
-->
<script src=http://code.jquery.com/jquery-1.10.1.min.js></script>

<script type="text/javascript">
	function registro() {

		var req = emailRegistro = document.getElementById("correo").value;
		//var req=nombreUsuario=document.getElementById("nombreUsuario").value;
		var pass1 = document.getElementById("pwd1").value;
		var pass2 = document.getElementById("pwd2").value;
		//var idSession=document.getElementById("idSession").value;
		var divRegistro = document.getElementById("divRegistro");
		var mensajeRegistro = document.getElementById("divRegistro");

		var reqRegistrar = new XMLHttpRequest();

		reqRegistrar.open("post", "Registrar.jsp");
		reqRegistrar.setRequestHeader("Content-Type",
				"application/x-www-form-urlencoded");
		reqRegistrar.onreadystatechange = function() {
			if (reqRegistrar.readyState == 4) {
				if (reqRegistrar.status == 200) {
					var result = JSON.parse(reqRegistrar.responseText);
					if (result.resultado == "OK") {

						document.getElementById("nombreUsuario").value = "";
						document.getElementById("email").value = "";
						document.getElementById("pwd1").value = "";
						document.getElementById("pwd2").value = "";
						alert("Registro exitoso, " + emailRegistro);
						divRegistro.style = "display:none";
					} else {
						console.log(result);
						alert("Error: " + result.mensaje);
						mensajeRegistro.innerHTML = result.resultado;
					}
				} else {
					alert("Algo pasa");
				}
			}
		};
		var p = {
			//nombreUsuario : nombreUsuario,
			email : emailRegistro,
			pwd1 : pass1,
			pwd2 : pass2
		};

		reqRegistrar.send("p=" + JSON.stringify(p));
	}
</script>

</head>
<body>

	<div class="container" id="divRegistro">
		<div class="jumbotron">
			<h2>Página de registro de la Oca</h2>
			<p>Rellene los campos para registrarse en la página y así poder guardar sus progresos, tales como el número de victorias y derrotas.</p>
		</div>

		<div class="container" id="divRegistro">
			<div class="row">
				<form class="col-lg-6" style="margin: 0 auto;">

					<form action="Registrar.jsp" method="post">
						<div class="form-group">
							<label for="labelCorreo">Correo Electrónico</label> <input
								type="text" class="form-control" id="correo"
								placeholder="ejemplo@ejemplo.com"
								title="Introduzca una dirección de correo">
						</div>
						<div class="form-group">
							<label for="labelPwd1">Contraseña</label> <input type="password"
								class="form-control" id="pwd1"
								placeholder="Introduce una contraseña válida" title="Contraseña">
						</div>
						<div class="form-group">
							<label for="labelPwd2">Repita la contraseña</label> <input
								type="password" class="form-control" id="pwd2"
								placeholder="Repita la contraseña" title="Repita la contraseña">
						</div>
						<button onclick="event.preventDefault(); registro()"
							class="btn btn-primary" type="submit" id="btnRegistrar">Registrar</button>
						<p>o registrarse usando Google</p>
						<div id="my-signin2" data-width="300" data-height="200"
							data-longtitle="true">
							<script>
								function onSuccess(googleUser) {
									console.log('Logged in as: '
											+ googleUser.getBasicProfile()
													.getName());
									console.log('Email:  '
											+ googleUser.getBasicProfile()
													.getEmail());
								}
								function onFailure(error) {
									console.log(error);
								}
								function renderButton() {
									gapi.signin2.render('my-signin2', {
										'scope' : 'profile email',
										'width' : 240,
										'height' : 50,
										'longtitle' : true,
										'theme' : 'dark',
										'onsuccess' : onSuccess,
										'onfailure' : onFailure
									});
								}
							</script>
						</div>
						<script
							src="https://apis.google.com/js/platform.js?onload=renderButton"
							async defer></script>
					</form>
				</form>
			</div>

		</div>

		<span id="mensajeRegistro"></span>
	</div>
</body>
</html>
