<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Partida - La Oca</title>
	
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">
</head>

	<body>
		<div id="wrapper">
			<div class="container">
					<div class="row">
						<div class="col-md-12">
							<h1>La Oca</h1>
						</div>
					</div>
					<div class="row">
					<div class="col-md-9">				
						<svg id="tablero" viewBox="0 0 1130 900" xmlns="http://www.w3.org/2000/svg">
						</svg>
					</div>
					<div class="col-md-3">
							<h3>Partida ID:</h3>
							<button class="btn btn-outline-primary" id="btnDado" onclick="event.preventDefault(); tirarDado()"><img src="imagenes/die.png"><p>¡Lanzar dado!</p></button>
							<button class="btn btn-outline-danger" id="btnSalir" onclick="salir()"><img src="imagenes/flag.png"><p>Dejar partida</p></button>
							<hr>
							<p style="text-align:center; text-transform: uppercase; font-weight: bold;">Información de la partida</p>
		
							<p>Estás en la casilla: <span id="casilla"></span></p>
		
							<hr>
							<p style="text-align:center; text-transform: uppercase; font-weight: bold;">Jugadores de la partida</p>
							<ul id="listaDeJugadores" class="list-group">
			  					<!--  <li id="jugador1" class="list-group-item active">Jugador 1</li>
			 					<li id="jugador2" class="list-group-item">Jugador 2</li>-->
							</ul>
							<hr>
							<iframe id="iframeIndex" src="index.html" style="visibility: hidden;"></iframe> 
					</div>
					</div>
		
			</div>
		</div>	
		<script src="scripts/tablero.js"></script>
		<script src="scripts/partidas.js"></script>
		
		<script>
			var tablero = new Tablero();
			var lienzo = document.getElementById("tablero");
			tablero.dibujar(lienzo);
		</script>
		
		<script>
	
			function sleep(ms) {
				  return new Promise(resolve => setTimeout(resolve, ms));
				}
			
			 sleep(3000);
			
			conectarWebSocket();
			function tirarDado(){
				//var numero = getRandomInt(1,6);
				var numero=Math.floor(Math.random() * (6 - 1 + 1)) + 1;
				console.log(numero);
				var p={
						tipo:'DADO',
						idPartida : sessionStorage.idPartida,
						nombreJugador : sessionStorage.nombre,
						puntos : numero
						
				};
				ws.send(JSON.stringify(p));
				console.log(p+" ha sido enviado");
				return numero;
				
			}
		
			//function getRandomInt(min, max) {
			//    return Math.floor(Math.random() * (max - min + 1)) + min;
			//}
		</script>
	
	</body>
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
	
</html>